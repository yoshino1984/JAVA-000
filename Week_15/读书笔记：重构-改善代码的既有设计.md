第一遍读这本书已经是两年前刚工作的时候，初读就只学到了一点编程规范的皮毛，这一遍读的心得主要总结为下述内容：

## 三个核心
- **傻瓜都能写出计算机能够理解的代码，唯有写出人类容易理解的代码，才是优秀程序员。**
    - 重构的主要目的是为了使代码容易理解。
    - 结构良好的代码更容易理解。
    - 同一组织内使用相同的代码结构，有助于组织内人员互相理解别人写的代码。
    - 很少有人能一开始就设计出结构非常合理的代码。或者开始的代码结构还算合理，但经过几次修改后，可能代码变得难以理解了。需要使用重构优化代码，使代码保持良好结构。
- **如果代码结构使你无法很方便给程序添加新特性，就先重构程序，再添加特性。**
    - 随时进行重构，需要重构时就先重构。而不是专门抽出时间执行重构。
    - 重构后，能减少添加新特性的时间。
    - 通过重构，可以让我们更容易熟悉现有代码。
- **大规模重构只会带来灾难。**
    - 大规模重构很难保证重构前后程序行为一致。程序出现问题时，也很难迅速定位问题点。
    - 重构应该小步前进。每次执行一个小的重构，重构完成，立即测试，检查是否改变了程序的行为。

## 常用的几个重构手法
### 提炼函数
- 这应该是用得最多的重构手法了。 
- 以用途命名函数。
- （建议）采用自解释的方式命名，但由于英语水平的差异，很多时候还是需要个自解释的机制
### 以函数对象取代函数
- 这个重构手法主要是解决“提炼方法”时，可能造成参数过多的情况。
- 将函数放进一个单独对象中，然后将这个大函数分解为多个小函数。
### 以对象取代数据值
- 如果一个数据项有自己的行为，或者需要与其他数据一起绑定使用，则为该数据项单独建一个类。使用该数据项的类换成使用类对象。
- 如“生日”字段。该字段有几个自己的行为：计算下一次生日、公历农历转换、转为适合显示的格式等。
- 类似于值对象
### 类型码
- 类型码的三种重构手法：
    - 以类取代类型码：类似枚举
    - 以子类取代类型码：以类型码的宿主类为基类，针对每种类型码建立子类。
    - 以State/Strategy取代类型码：适用于无法使用“以子类取代类型码”的情况。为类型码新建单独的基类和子类，并将相关行为移到新建的类中。
### 以多态取代条件表达式
- 根据对象类型的不同而执行不同的行为时，将条件表达式的分支放进子类的覆写函数中。 
- 同一组条件表达式在多处出现，使用多态可以带来非常大的收益。将来如果需要添加新的类型，只需要实现一个新的子类就可以了，而不必修改所有条件表达式。
### 引入Null对象
- 新建一个代表null值的子类。实现值为null时的特定行为。
- null值替换为null对象。
### 塑造模板函数
- 子类中的函数执行相似操作，但细节不同。将这些不同操作放进独立函数中，子类中只需实现这些不同函数。
- 少部分的逻辑不同的话也可以使用函数式编程的方式解决


## 五个重点
### 面向对象开发是基础
- 稍为复杂点的系统，使用面向过程式的开发，无论怎么实现，都很难良好的结构。
- 很多重构手法，只有使用面向对象开发才能实施。
- 面向对象设计比面向过程设计要困难得多。可以从两方面入手：一是先描述用例或问题域，从描述文本中寻找名词和动词，得到类、属性、方法，建立初始类图。二是先实现粗糙的类、方法，通过重构，逐步完善类结构。
### 先有测试，再有重构
- 每完成一个重构，就执行测试，检查重构前后的结果是否一致。
### 保持程序行为不变
- 就算在重构过程中发现现有代码是错误的，也先不修改，保证重构前后结果一致。仅把错误记录下来，重构完成后再来修复错误。
### 不需要过度设计，因为可以重构
- 重构与设计互补。有了重构，可以简化设计。不必一开始就设计得非常完善，考虑将来所有变化。将来的变化可以通过重构解决。
- KISS和YANGI原则
### 提高理论基础。
- 很多时候，我们知道某个实现不好，但不知道该怎么重构，才能实现得更好。 通过多看理论书籍，充分吸收前人的经验总结。
